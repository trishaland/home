<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trisha Sorter</title>
  <link rel="icon" type="image/png" href="TrishaLand.webp">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; scroll-behavior: smooth; }
    body {
      font-family: "Poppins", sans-serif;
      background: #ffe4ec;
      color: #000;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding-top: 60px;
      overflow-x: hidden;
    }

    /* ===== HEADER ===== */
    header {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      background: rgba(173, 216, 230, 0.8);
      backdrop-filter: blur(8px);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      height: 60px;
    }
    .logo { display: flex; align-items: center; gap: 10px; }
    .logo-img { width: 55px; height: auto; }
    .logo-text { line-height: 1.2; }
    .logo-main { font-size: 22px; font-weight: 600; color: #004080; }
    .logo-sub { font-size: 12px; color: #333; }

    .mobile-logo {
      display: none;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }
    .mobile-logo img { width: 150px; height: auto; }

    nav ul { list-style: none; display: flex; gap: 25px; }
    nav ul li a {
      text-decoration: none; color: #000; font-weight: 400; transition: 0.3s;
    }
    nav ul li a:hover { color: #004080; }

    .hamburger { display: none; flex-direction: column; cursor: pointer; gap: 5px; }
    .hamburger span { width: 25px; height: 3px; background: #000; border-radius: 5px; }

    .hamburger.active span:nth-child(1) { transform: rotate(45deg) translateY(8px); }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translateY(-8px); }

    @media (max-width: 768px) {
      .logo { display: none; }
      .mobile-logo { display: block; }
      nav ul {
        display: none;
        position: absolute;
        top: 60px; right: 20px;
        background: #add8e6;
        flex-direction: column;
        gap: 15px;
        padding: 20px;
        border-radius: 10px;
      }
      nav ul.active { display: flex; }
      .hamburger { display: flex; }
    }

    /* ===== MAIN ===== */
    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 60px 20px 120px;
    }

    /* === GAME BOX === */
    .game-box {
      background: #fff;
      border-radius: 25px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      padding: 80px 150px;
      width: 100%;
      max-width: 1200px;
      text-align: center;
    }

    h1 { color: #d6336c; font-size: 2.5rem; margin-bottom: 10px; }
    p { color: #444; font-size: 1.2rem; margin-bottom: 20px; }

    /* Filter Section */
    #filter-section, #sorter-section, #result-section {
      width: 100%;
    }

    .custom-select {
      display: inline-block;
      margin: 10px;
      padding: 16px;
      border-radius: 8px;
      border: 2px solid #ff6fa5;
      font-size: 1rem;
      width: 260px;
      background: white;
      color: #333;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml;utf8,<svg fill='gray' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 20px;
    }

    .switch { display: inline-flex; align-items: center; margin-top: 10px; cursor: pointer; font-size: 1rem; }
    .switch input { display: none; }
    .slider {
      width: 50px; height: 26px; background: #ccc; border-radius: 20px; margin-right: 10px; position: relative;
    }
    .slider::before {
      content: ""; position: absolute; width: 20px; height: 20px; background: white; border-radius: 50%;
      top: 3px; left: 3px; transition: transform 0.3s;
    }
    input:checked + .slider { background: #ff6fa5; }
    input:checked + .slider::before { transform: translateX(24px); }

    button {
      margin-top: 20px;
      padding: 14px 30px;
      font-size: 1.1rem;
      border: none;
      background: #ff6fa5;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:disabled { background: #ccc; cursor: not-allowed; }
    button:hover:not(:disabled) { background: #e05285; }

/* ---------------- SORTER SECTION ---------------- */
#sorter-section { display: none; }

.sort-container {
  display: flex; 
  justify-content: center; 
  align-items: center; 
  gap: 40px; 
  margin: 40px 0;
}

.card {
  background: white; 
  padding: 12px; 
  border-radius: 12px; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 220px; 
  cursor: pointer; 
  transition: transform 0.2s;
  position: relative;
}
.card:hover { transform: scale(1.05); }
.card img { width: 100%; border-radius: 8px; }

.or-text { 
  font-size: 24px; 
  font-weight: bold; 
  color: #d6336c; 
  align-self: center; 
}

.tie-btn {
  display: inline-block; 
  margin: 15px auto; 
  padding: 14px 40px; 
  font-size: 20px; 
  border: none;
  border-radius: 25px; 
  background: #ff4d6d; 
  color: white; 
  cursor: pointer;
}
.tie-btn:hover { background: #e63956; }

.progress-container { 
  width: 80%; 
  margin: 20px auto; 
  text-align: left; 
}
.progress-label { 
  font-weight: bold; 
  margin-bottom: 5px; 
}
.progress-bar { 
  width: 100%; 
  background: #f5b5c5; 
  border-radius: 10px; 
  overflow: hidden; 
}
.progress { 
  height: 14px; 
  background: #ff6fa5; 
  width: 0%; 
  transition: width 0.3s; 
}

/* Badge kategori */
.category-label {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: bold;
  border-radius: 8px;
  color: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.category-label.mng { background: #ff80ab; }
.category-label.off { background: #82b1ff; }
.category-label.onair { background: #4db6ac; }
.category-label.trishelca { background: #ffd54f; color:#333; }
.category-label.other { background: #ba68c8; }

    /* Result Section */
    #result-section { display: none; }
    #filter-info { margin-bottom: 20px; font-size: 1.1rem; }

    .ranking-top3 {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 30px 0 50px;
      flex-wrap: wrap;
    }
    .top3-item {
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 200px;
      text-align: center;
      position: relative;
    }
    .top3-rank {
      font-weight: bold;
      color: white;
      background: #ff6fa5;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
    }
    .top3-item img { width: 100%; border-radius: 8px; }

    .ranking-others {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      justify-items: center;
    }
    .other-item {
      background: white;
      border-radius: 8px;
      padding: 8px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      width: 120px;
      text-align: center;
    }
    .other-item img { width: 100%; border-radius: 6px; }

    .restart-btn {
      margin-top: 40px;
      padding: 14px 30px;
      font-size: 1.1rem;
      border: none;
      background: #ff6fa5;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }

    .result-footer {
      margin-top: 30px;
      font-size: 0.9rem;
      color: #555;
    }
    .result-footer a { color: #d6336c; text-decoration: underline; }

    /* Footer */
    footer {
      background: #004080;
      color: white;
      padding: 50px 20px 20px;
      margin-top: auto;
      text-align: left;
    }
    .footer-container {
      display: flex; flex-wrap: wrap; justify-content: space-between;
      max-width: 1200px; margin: 0 auto; gap: 30px;
    }
    .footer-column { flex: 1; min-width: 200px; }
    .footer-column h3 { font-size: 1.1rem; margin-bottom: 15px; color: #ffdd57; }
    .footer-column ul { list-style: none; }
    .footer-column ul li { margin-bottom: 10px; }
    .footer-column a { color: white; text-decoration: none; }
    .footer-column a:hover { color: #ffdd57; }
    .footer-bottom {
      text-align: center;
      margin-top: 30px;
      font-size: 0.9rem;
      border-top: 1px solid rgba(255,255,255,0.2);
      padding-top: 15px;
    }

   /* Footer */
    footer {
      background: #004080;
      color: white;
      padding: 50px 20px 20px;
      margin-top: auto;
      text-align: left;
    }
    .footer-container {
      display: flex; flex-wrap: wrap; justify-content: space-between;
      max-width: 1200px; margin: 0 auto; gap: 30px;
    }
    .footer-column { flex: 1; min-width: 200px; }
    .footer-column h3 { font-size: 1.1rem; margin-bottom: 15px; color: #ffdd57; }
    .footer-column ul { list-style: none; }
    .footer-column ul li { margin-bottom: 10px; }
    .footer-column a { color: white; text-decoration: none; }
    .footer-column a:hover { color: #ffdd57; }
    .footer-bottom {
      text-align: center;
      margin-top: 30px;
      font-size: 0.9rem;
      border-top: 1px solid rgba(255,255,255,0.2);
      padding-top: 15px;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const hamburger = document.querySelector(".hamburger");
      const navMenu = document.querySelector("nav ul");
      hamburger.addEventListener("click", () => {
        hamburger.classList.toggle("active");
        navMenu.classList.toggle("active");
      });
    });
  </script>
</head>

<body>
   <!-- HEADER -->
  <header>
    <div class="logo">
      <img src="TrishaLand.webp" alt="Logo TrishaLand" class="logo-img">
      <div class="logo-text">
        <div class="logo-main">Trishaland</div>
        <div class="logo-sub">Fansite Trisha JKT48</div>
      </div>
    </div>

    <div class="mobile-logo">
      <img src="TrishaLandMobile.webp" alt="Logo TrishaLand Mobile">
    </div>

    <nav>
      <ul>
        <li><a href="index.html">HOME</a></li>
        <li><a href="about.html" style="color:#ffffff;">ABOUT TRISHA</a></li>
        <li><a href="corner.html">CORNER</a></li>
      </ul>
    </nav>

    <div class="hamburger">
      <span></span><span></span><span></span>
    </div>
  </header>

  <!-- MAIN -->
  <main>
 <!-- FILTER SECTION -->
  <div id="filter-section">
    <h1>Welcome to Trisha Sorter!</h1>
    <p>Select filters to sort Trisha’s photos</p>

    <div class="filters">
      <select id="jenisFoto" class="custom-select">
        <option value="">Select Category</option>
        <option value="All Photos">All Photos</option>
        <option value="Meet and Greet">Meet and Greet</option>
        <option value="Off Air & On Air">Off Air & On Air</option>
        <option value="Trishelca">Trishelca</option>
      </select>

      <select id="tahunFoto" class="custom-select" disabled>
        <option value="">Select Year</option>
        <option value="2024">2024</option>
        <option value="2025">2025</option>
      </select>

      <label class="switch disabled" id="switchWrapper">
        <input type="checkbox" id="allYear" disabled>
        <span class="slider"></span>
        <span>All Years</span>
      </label>

      <button id="startBtn" disabled>START SORTING!</button>
    </div>
  </div>

  <!-- SORTER SECTION -->
  <div id="sorter-section">
    <div class="sort-title">Choose your favorite Trisha</div>

    <div class="sort-container">
      <div class="card" id="card1">
        <div class="category-label"></div>
        <img src="https://via.placeholder.com/200x250" alt="Photo 1">
      </div>
      <div class="or-text">OR</div>
      <div class="card" id="card2">
        <div class="category-label"></div>
        <img src="https://via.placeholder.com/200x250" alt="Photo 2">
      </div>
    </div>

    <button class="tie-btn" id="tieBtn">TIE!</button>
    <button class="undo-btn" id="undoBtn">UNDO LAST PICK</button>

    <div class="progress-container">
      <div class="progress-label">Sort Progress: <span id="progress-text">0%</span></div>
      <div class="progress-bar"><div class="progress" id="progress-bar"></div></div>
    </div>

    <div class="filters" id="selected-filters"></div>
  </div>

  <!-- RESULT SECTION -->
  <div id="result-section">
    <h1>Your Results!</h1>
    <div id="filter-info"></div>
    <div class="ranking-top3" id="ranking-top3"></div>
    <div class="ranking-others" id="ranking-others"></div>
    <button class="restart-btn" onclick="restartSorter()">Start a New Sort</button>

    <div class="result-footer" id="result-footer">
      To appreciate the photographers for capturing Trisha’s best photos, 
      please follow and like them <a href="https://x.com/rasyasyawal_/status/1972267641533550819" target="_blank">here</a>.
    </div>
  </div>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-column">
        <h3>Halaman</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About Trisha</a></li>
          <li><a href="corner.html">Corner</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h3>Sosial Media Trisha</h3>
        <ul>
          <li><a href="https://www.instagram.com/jkt48.trisha/" target="_blank">Instagram</a></li>
          <li><a href="https://www.threads.com/@jkt48.trisha?xmt=AQF0-sEtwtdm2hYKSQltbYMsN6rjfFrYxUrnCwj_ybbCsJc" target="_blank">Threads</a></li>
          <li><a href="https://x.com/JTrisha_JKT48" target="_blank">X / Twitter</a></li>
          <li><a href="https://www.tiktok.com/@jkt48.trisha" target="_blank">TikTok</a></li>
          <li><a href="https://www.idn.app/jkt48_trisha" target="_blank">IDN App</a></li>
          <li><a href="https://www.showroom-live.com/r/JKT48_Trisha" target="_blank">Showroom</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h3>Hashtag</h3>
        <ul>
          <li>#TrishAfternoon</li>
          <li>#TrishArt</li>
          <li>#Trishartuday</li>
          <li>#WannaSeeTrisha</li>
          <li>#Trishaur</li>
          <li>#Trishelca</li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      © 2025 Trishaland. All rights reserved.
    </div>
  </footer>

   <script>
    const startBtn = document.getElementById("startBtn");
    const jenisFoto = document.getElementById("jenisFoto");
    const tahunFoto = document.getElementById("tahunFoto");
    const allYear = document.getElementById("allYear");
    const switchWrapper = document.getElementById("switchWrapper");
    const filterSection = document.getElementById("filter-section");
    const sorterSection = document.getElementById("sorter-section");
    const resultSection = document.getElementById("result-section");
    const rankingTop3 = document.getElementById("ranking-top3");
    const rankingOthers = document.getElementById("ranking-others");
    const filterInfo = document.getElementById("filter-info");
    const selectedFilters = document.getElementById("selected-filters");
    const progressBar = document.getElementById("progress-bar");
    const progressText = document.getElementById("progress-text");
    const undoBtn = document.getElementById("undoBtn");
    const resultFooter = document.getElementById("result-footer");

    let fotoList = [];
    let totalSteps = 0;
    let currentStep = 0;
    const history = [];
    const score = {};
    let lastPair = [];
    let currentFilterText = "";

    const defaultTahunOptions = tahunFoto.innerHTML;

    // ---------------- PHOTO SETS ----------------
    const fotoSets = {
      "Meet and Greet": {
        2024: Array.from({length: 3}, (_, i) => `mng24-${i+1}.jpg`),
        2025: Array.from({length: 3}, (_, i) => `mng25-${i+1}.jpg`)
      },
      "Off Air & On Air": {
        2024: Array.from({length: 10}, (_, i) => `off24-${i+1}.jpg`),
        2025: Array.from({length: 8}, (_, i) => `off25-${i+1}.jpg`)
      },
      "Trishelca": {
        2024: Array.from({length: 11}, (_, i) => `trishelca24-${i+1}.jpg`),
        2025: Array.from({length: 11}, (_, i) => `trishelca25-${i+1}.jpg`)
      }
    };

    function getFotos(category, year, allYears) {
      let result = [];
      if (category === "All Photos") {
        Object.keys(fotoSets).forEach(k => {
          if (allYears) {
            result = result.concat(fotoSets[k]["2024"] || [], fotoSets[k]["2025"] || []);
          } else {
            result = result.concat(fotoSets[k][year] || []);
          }
        });
      } else {
        if (allYears) {
          result = [...(fotoSets[category]["2024"] || []), ...(fotoSets[category]["2025"] || [])];
        } else {
          result = fotoSets[category][year] || [];
        }
      }
      return result;
    }

    // --- DETEKSI KATEGORI ---
    function getCategoryFromFilename(filename) {
      if (filename.startsWith("mng")) return "Meet and Greet";
      if (filename.startsWith("trishelca")) return "Trishelca";
      if (filename.startsWith("off")) {
        // on air khusus
        if (["off24-1.jpg","off24-4.jpg","off25-8.jpg"].includes(filename)) {
          return "On Air";
        }
        return "Off Air";
      }
      return "Other";
    }

    function setCard(cardElem, foto) {
      const img = cardElem.querySelector("img");
      const label = cardElem.querySelector(".category-label");
      img.src = foto;

      const kategori = getCategoryFromFilename(foto);
      label.textContent = kategori;
      label.className = "category-label " + (
        kategori === "Meet and Greet" ? "mng" :
        kategori === "Off Air" ? "off" :
        kategori === "On Air" ? "onair" :
        kategori === "Trishelca" ? "trishelca" : "other"
      );
    }

    function getRandomPair() {
      if (fotoList.length < 2) return null;
      let f1, f2;
      do {
        f1 = fotoList[Math.floor(Math.random() * fotoList.length)];
        f2 = fotoList[Math.floor(Math.random() * fotoList.length)];
      } while (f1 === f2 || (lastPair.includes(f1) && lastPair.includes(f2)));
      lastPair = [f1, f2];
      return [f1, f2];
    }

    function checkFilters() {
      if (jenisFoto.value) {
        tahunFoto.disabled = false;
      } else {
        tahunFoto.disabled = true;
        tahunFoto.value = "";
        allYear.disabled = true;
        allYear.checked = false;
        switchWrapper.classList.add("disabled");
        tahunFoto.innerHTML = defaultTahunOptions;
      }
      if (jenisFoto.value && tahunFoto.value) {
        allYear.disabled = false;
        switchWrapper.classList.remove("disabled");
      } else {
        allYear.disabled = true;
        allYear.checked = false;
        switchWrapper.classList.add("disabled");
      }
      if (jenisFoto.value && (tahunFoto.value || allYear.checked)) {
        startBtn.disabled = false;
      } else {
        startBtn.disabled = true;
      }
    }

    jenisFoto.addEventListener("change", checkFilters);
    tahunFoto.addEventListener("change", checkFilters);

    allYear.addEventListener("change", () => {
      if (allYear.checked) {
        tahunFoto.innerHTML = `<option value="all" selected>2024 & 2025</option>`;
        tahunFoto.disabled = true;
      } else {
        tahunFoto.innerHTML = defaultTahunOptions;
        tahunFoto.disabled = false;
      }
      checkFilters();
    });

    startBtn.addEventListener("click", () => {
      const category = jenisFoto.value;
      const year = tahunFoto.value === "all" ? "2024 & 2025" : tahunFoto.value;
      const isAllYear = allYear.checked;
      filterSection.style.display = "none";
      sorterSection.style.display = "block";
      resultSection.style.display = "none";
      fotoList = getFotos(category, year, isAllYear);
      totalSteps = fotoList.length * 2;
      currentStep = 0;
      history.length = 0;
      lastPair = [];
      Object.keys(score).forEach(k => delete score[k]);
      undoBtn.style.display = "none";
      currentFilterText = `${category}, ${year}`;
      selectedFilters.innerHTML = `<span class="filter-tag">${category}</span><span class="filter-tag">${year}</span>`;
      showNextPair();
      renderProgress();
    });

    function showNextPair() {
      if (currentStep >= totalSteps) {
        showRanking();
        return;
      }
      const pair = getRandomPair();
      if (!pair) return;
      setCard(document.getElementById("card1"), pair[0]);
      setCard(document.getElementById("card2"), pair[1]);
    }

    function renderProgress() {
      let percent = Math.round((currentStep / totalSteps) * 100);
      progressBar.style.width = percent + "%";
      progressText.textContent = percent + "%";
    }

    function pick(action) {
      const [f1, f2] = lastPair;
      if (action === "left") score[f1] = (score[f1] || 0) + 1;
      if (action === "right") score[f2] = (score[f2] || 0) + 1;
      if (action === "tie") { score[f1] = (score[f1] || 0) + 1; score[f2] = (score[f2] || 0) + 1; }
      history.push({action, f1, f2});
      currentStep++;
      if (history.length > 0) undoBtn.style.display = "inline-block";
      renderProgress();
      showNextPair();
    }

    function undoProgress() {
      if (history.length > 0) {
        const last = history.pop();
        const {action, f1, f2} = last;
        if (action === "left") score[f1]--;
        if (action === "right") score[f2]--;
        if (action === "tie") { score[f1]--; score[f2]--; }
        currentStep--;
        if (history.length === 0) undoBtn.style.display = "none";
        renderProgress();
        setCard(document.getElementById("card1"), f1);
        setCard(document.getElementById("card2"), f2);
        lastPair = [f1, f2];
      }
    }

    function showRanking() {
      sorterSection.style.display = "none";
      resultSection.style.display = "block";
      rankingTop3.innerHTML = "";
      rankingOthers.innerHTML = "";
      filterInfo.textContent = `Filters: ${currentFilterText}`;
      let ranking = Object.entries(score).sort((a, b) => b[1] - a[1]);
      ranking.forEach(([foto], i) => {
        const kategori = getCategoryFromFilename(foto);
        const labelClass = (
          kategori === "Meet and Greet" ? "mng" :
          kategori === "Off Air" ? "off" :
          kategori === "On Air" ? "onair" :
          kategori === "Trishelca" ? "trishelca" : "other"
        );
        if (i < 3) {
          const div = document.createElement("div");
          div.className = "top3-item";
          div.innerHTML = `
            <div class="top3-rank">${i+1}</div>
            <div class="category-label ${labelClass}">${kategori}</div>
            <img src="${foto}" alt="Photo ${i+1}">
          `;
          rankingTop3.appendChild(div);
        } else {
          const div = document.createElement("div");
          div.className = "other-item";
          div.innerHTML = `
            <div class="category-label ${labelClass}">${kategori}</div>
            <img src="${foto}" alt="Photo ${i+1}">
            <div class="other-rank">#${i+1}</div>
          `;
          rankingOthers.appendChild(div);
        }
      });

      if (jenisFoto.value === "Trishelca") {
        resultFooter.style.display = "none";
      } else {
        resultFooter.style.display = "block";
      }
    }

    function restartSorter() {
      filterSection.style.display = "block";
      sorterSection.style.display = "none";
      resultSection.style.display = "none";
      jenisFoto.value = "";
      tahunFoto.innerHTML = defaultTahunOptions;
      tahunFoto.disabled = true;
      allYear.checked = false;
      allYear.disabled = true;
      switchWrapper.classList.add("disabled");
      startBtn.disabled = true;
    }

    document.getElementById("card1").addEventListener("click", () => pick("left"));
    document.getElementById("card2").addEventListener("click", () => pick("right"));
    document.getElementById("tieBtn").addEventListener("click", () => pick("tie"));
    undoBtn.addEventListener("click", undoProgress);

    checkFilters();
  </script>
</body>
</html>
